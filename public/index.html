<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ultimate PWA Todo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta name="theme-color" content="#007bff">
</head>
<body>
<div id="login-overlay" class="login-overlay">
    <div class="login-box">
        <h2>üîí –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
        <input type="password" id="loginPass" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
        <button onclick="login()" class="btn-save">–í–æ–π—Ç–∏</button>
        <p id="login-error" style="color:red; display:none;">–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞</p>
    </div>
</div>

<div id="app" style="display:none;">
        <!-- –≠–ö–†–ê–ù 1: –°–ü–ò–°–û–ö (–ê–ö–¢–ò–í–ù–´–ï) -->
        <section id="screen-list" class="screen">
            <header><h1>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1></header>
            <div class="calendar-nav">
                <button class="nav-arrow" onclick="changeWeek(-7)">‚ùÆ</button>
                <div id="calendar-strip" class="calendar-strip"></div>
                <button class="nav-arrow" onclick="changeWeek(7)">‚ùØ</button>
            </div>
            <div id="taskList" class="task-list"></div>
        </section>

        <!-- –≠–ö–†–ê–ù 2: –¢–ï–ì–ò -->
        <section id="screen-tags" class="screen" style="display:none;">
            <header><h1>–¢–µ–≥–∏</h1></header>
            <div class="form-container">
                <div class="row">
                    <input type="text" id="newTagName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
                    <input type="color" id="newTagColor" value="#007bff">
                </div>
                <button class="btn-save" onclick="createTag()">–°–æ–∑–¥–∞—Ç—å —Ç–µ–≥</button>
            </div>
            <div id="tags-management-list" class="task-list"></div>
        </section>

        <!-- –≠–ö–†–ê–ù 3: –°–û–ó–î–ê–ù–ò–ï -->
        <section id="screen-create" class="screen" style="display:none;">
            <header><h1>–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h1></header>
            <div class="form-container">
                <input type="text" id="taskText" placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?">
                <div class="row">
                    <label>–î–∞—Ç–∞: <input type="date" id="taskDate"></label>
                    <label>–í—Ä–µ–º—è: <input type="time" id="taskTime"></label> <!-- –£–±—Ä–∞–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ 09:00 -->
                </div>
                <div class="days-selector">
                    <p>–ü–æ–≤—Ç–æ—Ä –ø–æ –¥–Ω—è–º:</p>
                    <div class="days-grid">
                        <button type="button" class="day-btn" data-day="1">–ü–Ω</button>
                        <button type="button" class="day-btn" data-day="2">–í—Ç</button>
                        <button type="button" class="day-btn" data-day="3">–°—Ä</button>
                        <button type="button" class="day-btn" data-day="4">–ß—Ç</button>
                        <button type="button" class="day-btn" data-day="5">–ü—Ç</button>
                        <button type="button" class="day-btn" data-day="6">–°–±</button>
                        <button type="button" class="day-btn" data-day="0">–í—Å</button>
                    </div>
                </div>
                <div class="tag-selector-container">
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥–∏:</p>
                    <div id="tag-choices" class="tag-chips-cloud"></div>
                </div>
                <select id="taskDifficulty">
                    <option value="1">‚≠ê –õ–µ–≥–∫–æ</option>
                    <option value="2">‚≠ê‚≠ê –°—Ä–µ–¥–Ω–µ</option>
                    <option value="3">‚≠ê‚≠ê‚≠ê –í–∞–∂–Ω–æ</option>
                </select>
                <button class="btn-save" onclick="addTask()">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </section>

        <!-- –≠–ö–†–ê–ù 4: –ê–†–•–ò–í (–í–´–ü–û–õ–ù–ï–ù–ù–´–ï) -->
        <section id="screen-archive" class="screen" style="display:none;">
            <header><h1>–ê—Ä—Ö–∏–≤</h1></header>
            <div id="archiveList" class="task-list"></div>
        </section>

        <!-- –≠–ö–†–ê–ù 5: –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
        <section id="screen-stats" class="screen" style="display:none;">
            <header><h1>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1></header>
            <div class="stats-scroll-container">
                <div class="stat-section">
                    <h3>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                    <div id="heatmap" class="heatmap"></div>
                </div>
                <div class="stat-section">
                    <h3>–ë–∞–ª–∞–Ω—Å —Ç–µ–≥–æ–≤</h3>
                    <div class="canvas-container"><canvas id="radarChart"></canvas></div>
                </div>
                <div id="stats-summary" class="stats-summary-grid"></div>
            </div>
        </section>

        <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
        <nav class="nav-bar">
            <button onclick="showScreen('screen-list')">üìã</button>
            <button onclick="showScreen('screen-archive')">‚úÖ</button>
            <button onclick="showScreen('screen-create')" class="add-nav-btn">‚ûï</button>
            <button onclick="showScreen('screen-tags')">üè∑Ô∏è</button>
            <button onclick="showScreen('screen-stats')">üìä</button>
        </nav>
    </div>
    <script src="script.js"></script>
</body>
</html>